"use strict";(self.webpackChunkFinalProject=self.webpackChunkFinalProject||[]).push([[665],{2665:(T,l,s)=>{s.r(l),s.d(l,{GameModule:()=>Q});var a=s(6895),u=s(9030),t=s(4650),c=s(4006),p=s(4004);let g=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-correct"]],decls:3,vars:0,consts:[[1,"fa","fa-check",2,"font-size","20px","color","green"]],template:function(e,o){1&e&&(t.TgZ(0,"span"),t._uU(1," Correct! "),t._UZ(2,"i",0),t.qZA())},encapsulation:2}),n})();var d=s(5963),f=s(3180),m=s(470),h=s(8896);let v=(()=>{class n{constructor(e){this.authService=e,this.scoredNow=null}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(h.e))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-game-over"]],inputs:{scoredNow:"scoredNow"},decls:5,vars:1,template:function(e,o){1&e&&(t.TgZ(0,"div")(1,"h1"),t._uU(2,"GAME OVER"),t.qZA(),t.TgZ(3,"p"),t._uU(4),t.qZA()()),2&e&&(t.xp6(4),t.hij("You scored ",o.scoredNow,""))},styles:["div[_ngcontent-%COMP%]{width:100%;height:100vh;background-color:#272727;text-align:center;vertical-align:middle;padding:100px 0}h1[_ngcontent-%COMP%]{color:#b11212;font-size:10rem}p[_ngcontent-%COMP%]{font-size:3rem;margin-top:55px}"]}),n})();function x(n,i){1&n&&t._UZ(0,"input",14),2&n&&t.Q6J("formControl",i.$implicit)}function C(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",15),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(4);return t.KtG(r.Skip())}),t._uU(1," S K I P "),t.qZA()}}function _(n,i){if(1&n&&(t.TgZ(0,"div",7)(1,"div",8)(2,"div",9),t._UZ(3,"img",10)(4,"img",10)(5,"br"),t.qZA(),t.TgZ(6,"form",11),t.YNc(7,x,1,1,"input",12),t.qZA()(),t.YNc(8,C,2,0,"button",13),t.qZA()),2&n){const e=t.oxw().$implicit,o=t.oxw(2);t.xp6(3),t.Q6J("src",e.firstPicture,t.LSH),t.xp6(1),t.Q6J("src",e.secondPicture,t.LSH),t.xp6(3),t.Q6J("ngForOf",o.formArr.controls),t.xp6(1),t.Q6J("ngIf",1===o.skipCount)}}function w(n,i){if(1&n&&(t.TgZ(0,"div"),t.YNc(1,_,9,4,"div",6),t.qZA()),2&n){const e=i.$implicit,o=t.oxw(2);t.xp6(1),t.Q6J("ngIf",o.currentQuestion.answer===e.answer)}}function b(n,i){if(1&n&&(t.TgZ(0,"div")(1,"div")(2,"h2"),t._uU(3),t.qZA()(),t.TgZ(4,"div")(5,"h2",3),t._UZ(6,"i",4),t._uU(7),t.qZA()(),t.YNc(8,w,2,1,"div",5),t.qZA()),2&n){const e=t.oxw();t.xp6(3),t.hij("Score : ",e.score,""),t.xp6(4),t.hij(" ",e.subscribeTimer," "),t.xp6(1),t.Q6J("ngForOf",e.questions)}}function A(n,i){if(1&n&&t._UZ(0,"app-game-over",16),2&n){const e=t.oxw();t.Q6J("scoredNow",e.score)}}function O(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",17),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.PlayAgain())}),t._uU(1," Play Again "),t._UZ(2,"i",18),t.qZA()}}let N=(()=>{class n{constructor(e,o,r,Z){this.questionService=e,this.snackBar=o,this.router=r,this.authService=Z,this.scoredNow=new t.vpe,this.score=0,this.skipCount=1,this.formArr=new c.Oe([]),this.currentAnswerArr=[],this.timeLeft=60,this.isGameOver=!1}ngOnInit(){this.getQuestions()}getQuestions(){this.timeLeft=60,this.skipCount=1,this.score=0,this.isGameOver=!1,this.clearformArray(),this.questionService.getAllQuestions().subscribe(e=>{this.questions=e,this.main(),this.observableTimer()})}getRandomQuestion(){this.currentQuestion=this.questions[Math.floor(Math.random()*this.questions.length)]}getCurrQuestionIndex(){return this.questions.findIndex(e=>e.id===this.currentQuestion.id)}getWordFunc(){this.getRandomQuestion(),this.currentQuestion&&(this.currentAnswerArr=this.currentQuestion.answer.split("")),this.currentAnswerArr.forEach(()=>{const o=new c.NI("",{nonNullable:!0});o.valueChanges.subscribe(r=>{2==r.length&&o.setValue(r[1])}),this.formArr.push(o)});let e=this.getrandomIndexinString(this.currentQuestion.answer);this.formArr.controls[e].setValue(this.currentQuestion.answer.split("")[e])}main(){this.getWordFunc(),this.formArr.valueChanges.pipe((0,p.U)(e=>e.length>0?e.reduce((o,r)=>o+r):null)).subscribe(e=>{e&&this.currentQuestion&&e.toLocaleLowerCase()==this.currentQuestion.answer.toLowerCase()&&(this.score+=1,this.nextActions(),this.openSnackBar())})}clearformArray(){for(;0!==this.formArr.length;)this.formArr.removeAt(0)}nextActions(){for(this.questions.splice(this.getCurrQuestionIndex(),1),this.getRandomQuestion(),this.clearformArray(),this.questions.length<1&&(this.isGameOver=!0,this.timeLeft=60,this.getUserAndUpdateIFScoreHigher());0!==this.formArr.length;)this.formArr.removeAt(0);this.getWordFunc()}openSnackBar(){this.snackBar.openFromComponent(g,{duration:3e3})}Skip(){this.nextActions(),this.skipCount-=1}observableTimer(){const o=(0,d.H)(1e3,1e3).subscribe(r=>{(1==this.subscribeTimer||this.questions.length<1)&&(this.getUserAndUpdateIFScoreHigher(),this.isGameOver=!0,this.timeLeft=60,this.scoredNow.emit(this.score),o.unsubscribe()),this.subscribeTimer=this.timeLeft-r})}getUserAndUpdateIFScoreHigher(){let e=JSON.parse(localStorage.getItem("user"));this.authService.getUser(e.email).subscribe(o=>{o&&o.score<this.score&&(o.score=this.score,this.authService.updateUser(o).subscribe())})}PlayAgain(){this.getQuestions()}getrandomIndexinString(e){let r=e.length-1;return Math.floor(Math.random()*(r-0+1))+0}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(f.a),t.Y36(m.ux),t.Y36(u.F0),t.Y36(h.e))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-game-new"]],outputs:{scoredNow:"scoredNow"},decls:3,vars:3,consts:[[4,"ngIf"],[3,"scoredNow",4,"ngIf"],["class","again",3,"click",4,"ngIf"],[2,"float","right","margin-right","5%"],[1,"fa","fa-clock-o"],[4,"ngFor","ngForOf"],["class","question",4,"ngIf"],[1,"question"],[1,"par"],[1,"container"],["alt","",3,"src"],["action",""],["type","text",3,"formControl",4,"ngFor","ngForOf"],["class","skip",3,"click",4,"ngIf"],["type","text",3,"formControl"],[1,"skip",3,"click"],[3,"scoredNow"],[1,"again",3,"click"],[1,"fa","fa-refresh","fa-spin",2,"font-size","24px"]],template:function(e,o){1&e&&(t.YNc(0,b,9,3,"div",0),t.YNc(1,A,1,1,"app-game-over",1),t.YNc(2,O,3,0,"button",2)),2&e&&(t.Q6J("ngIf",!o.isGameOver),t.xp6(1),t.Q6J("ngIf",o.isGameOver),t.xp6(1),t.Q6J("ngIf",o.isGameOver))},dependencies:[a.sg,a.O5,c._Y,c.Fj,c.JJ,c.JL,c.oH,v],styles:[".question[_ngcontent-%COMP%]{background-color:#272727;height:100vh;text-align:center}img[_ngcontent-%COMP%]{margin-top:5px;align-self:center;width:400px;height:300px;object-fit:cover;gap:25px}.images[_ngcontent-%COMP%]{width:100%;text-align:center}input[_ngcontent-%COMP%]{width:30px;text-align:center;padding:5px;height:30px;font-size:25px;font-weight:700;color:#272727;border:1px solid #d63afd;background-color:#535353;color:#d63afd}.correct[_ngcontent-%COMP%]{color:#3afd7e!important;border:1px solid #3afd7e}div[_ngcontent-%COMP%]{background-color:#272727;text-align:center}h2[_ngcontent-%COMP%]{background-color:#272727;color:#d63afd;margin-bottom:0;font-weight:700}.container[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{height:80%;width:auto}.container[_ngcontent-%COMP%]{height:350px;width:100%;display:flex;justify-content:center}form[_ngcontent-%COMP%]{margin-top:30px}button[_ngcontent-%COMP%]{position:absolute;top:90%;right:5%;width:80px;height:40px;border:1px solid #d63afd;color:#d63afd;font-weight:700;cursor:pointer}button[_ngcontent-%COMP%]:hover{background-color:#d63afd;color:#fff}.again[_ngcontent-%COMP%]{display:absolute!important;top:430px;left:45%;width:120px;height:60px;border:1px solid rgb(177,18,18);color:#b11212;font-weight:700;cursor:pointer}.again[_ngcontent-%COMP%]:hover{background-color:#b11212;color:#fff}"]}),n})(),G=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[u.Bz.forChild([{path:"",component:N}]),u.Bz]}),n})();var M=s(529);let Q=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[a.ez,G,M.JF,c.UX,m.ZX]}),n})()}}]);